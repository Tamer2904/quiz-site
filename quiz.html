<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© Ø§Ù„Ø«Ù‚Ø§ÙÙŠØ© - Ø±Ù…Ø¶Ø§Ù† 1447Ù‡Ù€ / 2026Ù…</title>
  <style>
    *{box-sizing:border-box}
    body{
      font-family: Arial, sans-serif;
      background:#f6f7fb;
      padding:24px;
      margin:0;
    }
    .wrap{max-width:980px;margin:0 auto}
    .card{
      background:#fff;border-radius:16px;
      padding:22px;box-shadow:0 10px 30px rgba(0,0,0,.08);
      margin-bottom:18px;
    }
    h1{margin:0 0 10px 0;text-align:center}
    .muted{color:#666;text-align:center;margin:0 0 14px 0}
    button{
      width:100%;
      background:#6c63ff;color:#fff;border:0;border-radius:12px;
      padding:14px 16px;font-size:18px;font-weight:700;cursor:pointer;
      margin-top:14px;
    }
    button:disabled{opacity:.6;cursor:not-allowed}
    .msg{
      margin-top:14px;padding:12px 14px;border-radius:12px;font-weight:700;text-align:center;
      display:none;
    }
    .ok{background:#e8fff1;color:#0a6b2b;display:block}
    .err{background:#ffecec;color:#a30000;display:block}
    .hidden{display:none !important;}

    .topbar{
      display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap;
      padding:10px 0 0 0;
    }
    .pill{
      background:#f1f3ff;color:#3b37b8;border-radius:999px;padding:8px 12px;font-weight:700;
      font-size:14px;
    }
    .hr{height:1px;background:#eee;margin:12px 0}
    .q{
      border:1px solid #eee;border-radius:14px;padding:14px 14px;margin:12px 0;
      background:#fafafa;
    }
    .q-title{font-weight:800;margin-bottom:8px}
    .opts{display:grid;gap:8px}
    .opt{
      display:flex;align-items:center;gap:10px;
      padding:10px 12px;border:1px solid #e5e5e5;border-radius:12px;background:#fff;
    }
    .opt input{width:auto;margin:0}
    .small{font-size:13px;color:#666;text-align:center;margin-top:10px}

    .kv{
      display:grid;
      grid-template-columns: 160px 1fr;
      gap:10px 14px;
      align-items:center;
      margin-top:14px;
      background:#fafafa;
      border:1px solid #eee;
      border-radius:14px;
      padding:14px;
    }
    .k{font-weight:800;color:#333}
    .v{font-weight:700;color:#222;word-break:break-word}
    .greenBtn{background:#1f8b4c}
  </style>
</head>
<body>
  <div class="wrap">

    <!-- Gate -->
    <div class="card" id="gateCard">
      <h1>Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© Ø§Ù„Ø«Ù‚Ø§ÙÙŠØ© Ù„Ø´Ù‡Ø± Ø±Ù…Ø¶Ø§Ù† 1447Ù‡Ù€ / 2026Ù…</h1>
      <div class="muted">Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¨ÙŠØ§Ù†Ø§ØªÙƒ...</div>
      <div class="msg" id="gateMsg"></div>
      <button id="backBtn" class="hidden">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØªØ³Ø¬ÙŠÙ„</button>
    </div>

    <!-- QUIZ -->
    <div class="card hidden" id="quizCard">
      <div class="topbar">
        <div class="pill" id="who"></div>
        <div class="pill">Ù†Ø³Ø¨Ø© Ø§Ù„Ù†Ø¬Ø§Ø­: <span id="passPct">70</span>%</div>
        <div class="pill">Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©: <span id="qCount">0</span></div>
      </div>

      <div class="hr"></div>

      <div id="questions"></div>

      <button id="btnSubmit">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª</button>
      <div class="msg" id="quizMsg"></div>
      <div class="small">ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¬Ø§Ø¨Ø© ÙƒÙ„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„.</div>
    </div>

    <!-- âœ… APPROVED VIEW -->
    <div class="card hidden" id="approvedCard">
      <h1>ØªÙ… Ø§Ø¹ØªÙ…Ø§Ø¯ Ø¥Ø¬Ø§Ø¨Ø§ØªÙƒ Ø¨Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© âœ…</h1>
      <div class="muted">Ø´ÙƒØ±Ù‹Ø§ Ù„Ù…Ø´Ø§Ø±ÙƒØªÙƒ ğŸŒŸ</div>

      <div class="kv">
        <div class="k">Ø§Ù„Ø§Ø³Ù…</div>         <div class="v" id="apName">-</div>
        <div class="k">Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù…Ø¯Ù†ÙŠ</div>  <div class="v" id="apCivil">-</div>
        <div class="k">Ø±Ù‚Ù… Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚</div>   <div class="v" id="apBox">-</div>
        <div class="k">Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„</div>  <div class="v" id="apPhone">-</div>
      </div>

      <div class="msg ok" style="display:block" id="approvedMsg">ØªÙ… Ø§Ø¹ØªÙ…Ø§Ø¯ Ù…Ø­Ø§ÙˆÙ„ØªÙƒ Ø¨Ù†Ø¬Ø§Ø­.</div>

      <button id="approvedBtn" type="button" class="greenBtn">ØªÙ…</button>
    </div>

  </div>

<script>
  const API_URL = "https://script.google.com/macros/s/AKfycbwhdO_Ye6WivgCQyMTgEHrvNQOuEv6RJ9qBLCy-Vrhv_6BUhiCMV_m9kv82V3nYebk/exec";

  const PASS_PERCENT = 70;
  const QUIZ_ID = "RAMADAN_1447_2026_V1";

  const QUESTIONS = [
    { id:"tf1", type:"tf",  text:"ÙˆÙÙ„ÙØ¯ Ø§Ù„Ù†Ø¨ÙŠ ï·º ÙÙŠ Ø¹Ø§Ù… Ø§Ù„ÙÙŠÙ„ Ø¨Ø¹Ø¯ Ø­Ø§Ø¯Ø«Ø© Ø§Ù„ÙÙŠÙ„ Ø¨Ø´Ù‡Ø±ÙŠÙ† ØªÙ‚Ø±ÙŠØ¨Ù‹Ø§.", answer:"false" },
    { id:"tf2", type:"tf",  text:"ÙƒØ§Ù†Øª Ø£ÙˆÙ„ Ù‡Ø¬Ø±Ø© ÙÙŠ Ø§Ù„Ø¥Ø³Ù„Ø§Ù… Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ÙˆØ±Ø©.", answer:"false" },
    { id:"tf3", type:"tf",  text:"Ø´Ù‡Ø¯ Ø§Ù„Ù†Ø¨ÙŠ ï·º Ø­Ø±Ø¨ Ø§Ù„ÙÙØ¬ÙØ§Ø± ÙˆÙ‡Ùˆ Ø´Ø§Ø¨ Ù‚Ø¨Ù„ Ø§Ù„Ø¨Ø¹Ø«Ø©.", answer:"true" },
    { id:"tf4", type:"tf",  text:"Ø§Ø³ØªÙ…Ø± Ù†Ø²ÙˆÙ„ Ø§Ù„ÙˆØ­ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø¨ÙŠ ï·º Ø«Ù„Ø§Ø«Ù‹Ø§ ÙˆØ¹Ø´Ø±ÙŠÙ† Ø³Ù†Ø©.", answer:"true" },
    { id:"tf5", type:"tf",  text:"ÙƒØ§Ù† ØµÙ„Ø­ Ø§Ù„Ø­Ø¯ÙŠØ¨ÙŠØ© ÙÙŠ Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø³Ø§Ø¯Ø³Ø© Ù„Ù„Ù‡Ø¬Ø±Ø©.", answer:"true" },
    { id:"tf6", type:"tf",  text:"Ø¢Ø®Ø± ØºØ²ÙˆØ© ØºØ²Ø§Ù‡Ø§ Ø§Ù„Ù†Ø¨ÙŠ ï·º Ù‡ÙŠ ØºØ²ÙˆØ© ØªØ¨ÙˆÙƒ.", answer:"false" },
    { id:"tf7", type:"tf",  text:"ØªÙˆÙÙŠ Ø§Ù„Ù†Ø¨ÙŠ ï·º ÙˆØ¹Ù…Ø±Ù‡ Ø«Ù„Ø§Ø« ÙˆØ³ØªÙˆÙ† Ø³Ù†Ø©.", answer:"true" },
    {
      id:"mcq1",
      type:"mcq",
      text:"Ù‚ÙˆÙ„Ù‡ ØªØ¹Ø§Ù„Ù‰: ï´¿Ø¥ÙÙŠÙ‘ÙØ§ÙƒÙ Ù†ÙØ¹Ù’Ø¨ÙØ¯Ùï´¾ Ù‚Ø¯Ù‘Ù… Ø§Ù„Ù…ÙØ¹ÙˆÙ„ Ø¨Ù‡ Ø¹Ù„Ù‰ Ø§Ù„ÙØ¹Ù„ ÙˆØ§Ù„ÙØ§Ø¹Ù„ Ù„Ù„Ø¯Ù„Ø§Ù„Ø© Ø¹Ù„Ù‰:",
      choices:["Ø§Ù„Ø­ØµØ± ÙˆØ§Ù„ØªØ®ØµÙŠØµ","Ø§Ù„ØªØ®ÙÙŠÙ ÙÙŠ Ø§Ù„Ù„ÙØ¸","ØªØ¹Ø¸ÙŠÙ… Ø§Ù„ÙØ¹Ù„ ÙÙ‚Ø·","Ø§Ù„ØªÙØ§Ø¤Ù„ Ø¨Ø§Ù„Ø¹Ø¨Ø§Ø¯Ø©"],
      answer:"Ø§Ù„Ø­ØµØ± ÙˆØ§Ù„ØªØ®ØµÙŠØµ"
    },
    {
      id:"mcq2",
      type:"mcq",
      text:"Ø§Ù„Ù…Ù‚ØµÙˆØ¯ Ø¨Ù€ï´¿Ø§Ù„Ù’Ù‚ÙØ±Ù’Ø¢Ù†Ù Ø§Ù„Ù’Ø¹ÙØ¸ÙÙŠÙ…Ùï´¾ ÙÙŠ Ù‚ÙˆÙ„Ù‡ ØªØ¹Ø§Ù„Ù‰: ï´¿ÙˆÙÙ„ÙÙ‚ÙØ¯Ù’ Ø¢ØªÙÙŠÙ’Ù†ÙØ§ÙƒÙ Ø³ÙØ¨Ù’Ø¹Ù‹Ø§ Ù…Ù‘ÙÙ†Ù Ø§Ù„Ù’Ù…ÙØ«ÙØ§Ù†ÙÙŠ ÙˆÙØ§Ù„Ù’Ù‚ÙØ±Ù’Ø¢Ù†Ù Ø§Ù„Ù’Ø¹ÙØ¸ÙÙŠÙ…Ùï´¾ Ù‡Ùˆ:",
      choices:["Ø³ÙˆØ±Ø© Ø§Ù„ÙØ§ØªØ­Ø© ÙÙ‚Ø·","Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù‚Ø±Ø¢Ù†","Ø§Ù„Ù‚Ø±Ø¢Ù† Ù…Ø¹ Ø§Ù„Ø³Ù†Ù‘Ø©","Ø§Ù„Ù‚Ø±Ø¢Ù† ÙˆØ§Ù„ÙƒØªØ¨ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©"],
      answer:"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù‚Ø±Ø¢Ù†"
    },
    {
      id:"mcq3",
      type:"mcq",
      text:"Ù‚ÙˆÙ„Ù‡ ØªØ¹Ø§Ù„Ù‰: ï´¿Ù„ÙØ§ ÙŠÙØ³Ù’Ø£ÙÙ„Ù Ø¹ÙÙ…Ù‘ÙØ§ ÙŠÙÙÙ’Ø¹ÙÙ„Ùï´¾ ÙŠØ¯Ù„ Ø¹Ù„Ù‰:",
      choices:["Ù†ÙÙŠ Ø§Ù„Ø­ÙƒÙ…Ø© Ø¹Ù† Ø£ÙØ¹Ø§Ù„ Ø§Ù„Ù„Ù‡","ÙƒÙ…Ø§Ù„ Ø§Ù„Ø¹Ø¯Ù„ Ø§Ù„Ø¥Ù„Ù‡ÙŠ","Ø§Ù†ØªÙØ§Ø¡ Ø§Ù„Ù‚Ø¯Ø±Ø© Ø§Ù„Ø¨Ø´Ø±ÙŠØ©","Ø³Ù‚ÙˆØ· Ø§Ù„ØªÙƒÙ„ÙŠÙ"],
      answer:"ÙƒÙ…Ø§Ù„ Ø§Ù„Ø¹Ø¯Ù„ Ø§Ù„Ø¥Ù„Ù‡ÙŠ"
    },
    {
      id:"mcq4",
      type:"mcq",
      text:"Ø§Ù„Ù…Ø±Ø§Ø¯ Ø¨Ù€ï´¿Ø§Ù„Ù’ÙÙØªÙ’Ù†ÙØ©Ùï´¾ ÙÙŠ Ù‚ÙˆÙ„Ù‡ ØªØ¹Ø§Ù„Ù‰: ï´¿ÙˆÙØ§Ù„Ù’ÙÙØªÙ’Ù†ÙØ©Ù Ø£ÙØ´ÙØ¯Ù‘Ù Ù…ÙÙ†Ù Ø§Ù„Ù’Ù‚ÙØªÙ’Ù„Ùï´¾ Ù‡Ùˆ:",
      choices:["Ø§Ù„Ù‚ØªÙ„","Ø§Ù„Ø´Ø±Ùƒ ÙˆØ§Ù„ØµØ¯ Ø¹Ù† Ø§Ù„Ø¯ÙŠÙ†","Ø§Ù„Ø§Ø¨ØªÙ„Ø§Ø¡ Ø¨Ø§Ù„Ù…Ø±Ø¶","Ø§Ù„Ø¹Ø°Ø§Ø¨ ÙÙŠ Ø§Ù„Ø¢Ø®Ø±Ø©"],
      answer:"Ø§Ù„Ø´Ø±Ùƒ ÙˆØ§Ù„ØµØ¯ Ø¹Ù† Ø§Ù„Ø¯ÙŠÙ†"
    },
  ];

  let SESSION = { civil_id:"", box_number:"", name:"", phone:"", status:"" };

  const $ = (id) => document.getElementById(id);
  const digits = (v) => String(v || "").replace(/[^\d]/g, "");

  function showMsg(el, ok, text){
    el.className = "msg " + (ok ? "ok" : "err");
    el.textContent = text;
    el.style.display = "block";
  }
  function hide(el){ el.classList.add("hidden"); }
  function show(el){ el.classList.remove("hidden"); }

  async function apiCall(bodyObj){
    const res = await fetch(API_URL, {
      method: "POST",
      headers: { "Content-Type": "text/plain;charset=utf-8" },
      body: JSON.stringify(bodyObj),
    });
    return await res.json();
  }

  function renderQuestions(){
    $("qCount").textContent = QUESTIONS.length;
    $("passPct").textContent = PASS_PERCENT;

    const container = $("questions");
    container.innerHTML = "";

    QUESTIONS.forEach((q, idx) => {
      const div = document.createElement("div");
      div.className = "q";

      const title = document.createElement("div");
      title.className = "q-title";
      title.textContent = `${idx+1}) ${q.text}`;
      div.appendChild(title);

      const opts = document.createElement("div");
      opts.className = "opts";

      const choices = (q.type === "tf")
        ? [{label:"ØµØ­", value:"true"},{label:"Ø®Ø·Ø£", value:"false"}]
        : q.choices.map(c => ({label:c, value:c}));

      choices.forEach(ch => {
        const label = document.createElement("label");
        label.className = "opt";

        const input = document.createElement("input");
        input.type = "radio";
        input.name = q.id;
        input.value = ch.value;

        const span = document.createElement("span");
        span.textContent = ch.label;

        label.appendChild(input);
        label.appendChild(span);
        opts.appendChild(label);
      });

      div.appendChild(opts);
      container.appendChild(div);
    });
  }

  function collectAnswers(){
    const answers = {};
    for (const q of QUESTIONS){
      const chosen = document.querySelector(`input[name="${q.id}"]:checked`);
      if (!chosen) return { ok:false, missing:q.id };
      answers[q.id] = chosen.value;
    }
    return { ok:true, answers };
  }

  function grade(answers){
    let correct = 0;
    QUESTIONS.forEach(q => {
      if (String(answers[q.id]) === String(q.answer)) correct++;
    });
    const total = QUESTIONS.length;
    const percent = Math.round((correct / total) * 100);
    const passed = percent >= PASS_PERCENT;
    return { correct, total, percent, passed };
  }

  function openApprovedView(statusText){
    // ØªØ¹Ø¨Ø¦Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    $("apName").textContent  = SESSION.name  || "-";
    $("apCivil").textContent = SESSION.civil_id || "-";
    $("apBox").textContent   = SESSION.box_number || "-";
    $("apPhone").textContent = SESSION.phone || "-";

    // Ø±Ø³Ø§Ù„Ø© Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ©
    if (statusText) $("approvedMsg").textContent = statusText;

    // Ø¥Ø¸Ù‡Ø§Ø± ÙƒØ§Ø±Øª Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯
    hide($("gateCard"));
    hide($("quizCard"));
    show($("approvedCard"));

    $("approvedBtn").onclick = () => {
      window.location.href = "register.html";
    };
  }

  async function gate(){
    const params = new URLSearchParams(window.location.search);
    const civil = digits(params.get("civil_id") || "");
    const box   = digits(params.get("box_number") || "");

    if (!civil || !box){
      showMsg($("gateMsg"), false, "Ù„Ø§ ÙŠÙ…ÙƒÙ† ÙØªØ­ ØµÙØ­Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø¨Ø¯ÙˆÙ† Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø£ÙˆÙ„Ø§Ù‹.");
      show($("backBtn"));
      $("backBtn").onclick = () => window.location.href = "register.html";
      return;
    }

    try{
      const data = await apiCall({ action:"checkAccess", civil_id: civil, box_number: box });

      // âœ… Ù„Ùˆ Ø§Ù„Ø´Ø®Øµ Ø³Ø¨Ù‚ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„/Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯: Ø§ÙØªØ­ ØµÙØ­Ø© Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ Ù…Ø¨Ø§Ø´Ø±Ø©
      if (!data.ok && data.code === "ALREADY_SUBMITTED") {
        SESSION.civil_id = civil;
        SESSION.box_number = box;
        SESSION.name = data.name || "";
        SESSION.phone = data.phone || "";
        SESSION.status = (data.status || "").trim();

        openApprovedView(data.message || "ØªÙ… Ø§Ø¹ØªÙ…Ø§Ø¯ Ù…Ø­Ø§ÙˆÙ„ØªÙƒ. Ù†Ø´ÙƒØ±Ùƒ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ğŸŒŸ");
        return;
      }

      if (!data.ok){
        showMsg($("gateMsg"), false, data.message || "ØºÙŠØ± Ù…Ø³Ù…ÙˆØ­.");
        show($("backBtn"));
        $("backBtn").onclick = () => window.location.href =
          `register.html?civil_id=${encodeURIComponent(civil)}&box_number=${encodeURIComponent(box)}`;
        return;
      }

      SESSION.civil_id = civil;
      SESSION.box_number = box;
      SESSION.name = data.name || "";
      SESSION.phone = data.phone || "";   // âœ… Ù„Ø§Ø²Ù… Apps Script ÙŠØ±Ø¬Ù‘Ø¹Ù‡Ø§
      SESSION.status = (data.status || "").trim();

      $("who").textContent = SESSION.name ? `Ù…Ø±Ø­Ø¨Ù‹Ø§: ${SESSION.name}` : "Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ";

      hide($("gateCard"));
      show($("quizCard"));
      renderQuestions();

    }catch(e){
      showMsg($("gateMsg"), false, "ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±.");
      show($("backBtn"));
      $("backBtn").onclick = () => window.location.href = "register.html";
      console.error(e);
    }
  }

  $("btnSubmit").addEventListener("click", async () => {
    const msgEl = $("quizMsg");
    msgEl.style.display = "none";

    const got = collectAnswers();
    if (!got.ok){
      return showMsg(msgEl, false, "Ù…Ù† ÙØ¶Ù„Ùƒ Ø£Ø¬Ø¨ Ø¹Ù„Ù‰ ÙƒÙ„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„.");
    }

    const result = grade(got.answers);

    $("btnSubmit").disabled = true;
    $("btnSubmit").textContent = "Ø¬Ø§Ø±Ù Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...";

    try{
      const payload = {
        action: "submitQuiz",
        quiz_id: QUIZ_ID,
        civil_id: SESSION.civil_id,
        box_number: SESSION.box_number,
        answers: got.answers,
        score: result.correct,
        total: result.total,
        percent: result.percent
      };

      const data = await apiCall(payload);

      if (!data.ok){
        showMsg(msgEl, false, data.message || "Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„.");
        $("btnSubmit").disabled = false;
        $("btnSubmit").textContent = "Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª";
        return;
      }

      // âœ… Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„: Ø§ÙØªØ­ ØµÙØ­Ø© Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ ÙÙŠ ÙƒÙ„ Ø§Ù„Ø­Ø§Ù„Ø§Øª
      SESSION.status = (data.status || "").trim();

      const statusText = (SESSION.status === "PASSED")
        ? `âœ… ØªÙ… Ø§Ø¹ØªÙ…Ø§Ø¯ Ø¥Ø¬Ø§Ø¨Ø§ØªÙƒ Ø¨Ù†Ø¬Ø§Ø­. Ù†ØªÙŠØ¬ØªÙƒ ${result.correct}/${result.total} (${result.percent}%).`
        : `âœ… ØªÙ… Ø§Ø¹ØªÙ…Ø§Ø¯ Ù…Ø­Ø§ÙˆÙ„ØªÙƒ. Ù†ØªÙŠØ¬ØªÙƒ ${result.correct}/${result.total} (${result.percent}%).`;

      openApprovedView(statusText);

    }catch(e){
      showMsg(msgEl, false, "ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ± Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„.");
      console.error(e);
      $("btnSubmit").disabled = false;
      $("btnSubmit").textContent = "Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª";
    }
  });

  gate();
</script>
</body>
</html>

